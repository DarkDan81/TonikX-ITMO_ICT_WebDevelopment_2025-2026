<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="None" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Лабораторная работа №1</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u041e\u0442\u0447\u0435\u0442";
        var mkdocs_page_input_path = "index.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> Лабораторная работа №1
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Отчет</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#python">Работа с сокетами в Python</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#_1">Цель работы</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1-udp">Задание 1. Реализация клиент-серверного приложения (UDP)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-tcp">Задание 2. Выполнение математических операций (TCP)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-http-">Задание 3. HTTP-сервер (отдача страницы)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4">Задание 4. Многопользовательский чат</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#5-get-post">Задание 5. Веб-сервер с обработкой GET и POST</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#_2">Вывод</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">Лабораторная работа №1</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Отчет</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="no1">Отчет по лабораторной работе №1</h1>
<h2 id="python">Работа с сокетами в Python</h2>
<p><strong>Выполнил:</strong> Студент группы К3341 Дущенко Даниил Александрович</p>
<h3 id="_1">Цель работы</h3>
<p>Реализовать клиент-серверные приложения с использованием библиотеки <code>socket</code>, изучить протоколы UDP и TCP, реализовать многопоточную обработку подключений (<code>threading</code>) и простейший веб-сервер с поддержкой методов GET и POST.</p>
<hr />
<h3 id="1-udp">Задание 1. Реализация клиент-серверного приложения (UDP)</h3>
<p><strong>Постановка задачи:</strong> Реализовать обмен сообщениями "Hello, server" — "Hello, client" по протоколу UDP.</p>
<p><strong>Реализация:</strong>
Использовался <code>socket.SOCK_DGRAM</code>. Сервер принимает данные и адрес, затем отправляет ответ на полученный адрес. Соединение не устанавливается (UDP).</p>
<p><em>Код сервера (server.py):</em></p>
<pre><code class="language-python">import socket

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.bind(('127.0.0.1', 9090))
print(&quot;Server start&quot;)

while True:
    data, addr = sock.recvfrom(1024)
    print(f&quot;Client {addr}: {data.decode('utf-8')}&quot;)
    sock.sendto(b'Hello, client', addr)
</code></pre>
<p><em>Код клиента (client.py):</em></p>
<pre><code class="language-python">import socket

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.sendto(b'Hello, server', ('127.0.0.1', 9090))
data, _ = sock.recvfrom(1024)
print(f&quot;Server: {data.decode('utf-8')}&quot;)
sock.close()
</code></pre>
<p><strong>Результат работы:</strong>
<img alt="Alt text" src="img/lab1_task1.png" /></p>
<hr />
<h3 id="2-tcp">Задание 2. Выполнение математических операций (TCP)</h3>
<p><strong>Постановка задачи:</strong> Клиент отправляет операцию и параметры, сервер вычисляет и возвращает результат. Реализация через TCP.</p>
<p><strong>Реализация:</strong>
Использовался <code>socket.SOCK_STREAM</code>. Сервер парсит строку запроса, выполняет вычисления по варианту и возвращает строку ответа.</p>
<p><em>Код сервера:</em></p>
<pre><code class="language-python">import socket
import math

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.bind(('127.0.0.1', 8080))
sock.listen(1)

while True:
    conn, addr = sock.accept()
    data = conn.recv(1024).decode('utf-8')
    if not data:
        conn.close()
        continue

    parts = data.split()
    op = parts[0]
    nums = [float(x) for x in parts[1:]]
    result = &quot;&quot;

    if op == '1': 
        res = math.sqrt(nums[0]**2 + nums[1]**2)
        result = f&quot;Hypotenuse: {res}&quot;
    elif op == '2':
        a, b, c = nums[0], nums[1], nums[2]
        d = b**2 - 4*a*c
        if d &gt;= 0:
            x1 = (-b + math.sqrt(d)) / (2*a)
            x2 = (-b - math.sqrt(d)) / (2*a)
            result = f&quot;Roots: {x1}, {x2}&quot;
        else:
            result = &quot;No roots&quot;
    elif op == '3':
        res = (nums[0] + nums[1]) / 2 * nums[2]
        result = f&quot;Trapezoid area: {res}&quot;
    elif op == '4':
        res = nums[0] * nums[1]
        result = f&quot;Parallelogram area: {res}&quot;

    conn.send(result.encode('utf-8'))
    conn.close()
</code></pre>
<p><em>Код клиента:</em></p>
<pre><code class="language-python">import socket

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.connect(('127.0.0.1', 8080))

print(&quot;1-Pythagoras, 2-Quadratic, 3-Trapezoid, 4-Parallelogram&quot;)
op = input(&quot;Operation: &quot;)
params = input(&quot;Params: &quot;)

sock.send(f&quot;{op} {params}&quot;.encode('utf-8'))
data = sock.recv(1024)
print(f&quot;Result: {data.decode('utf-8')}&quot;)
sock.close()
</code></pre>
<p><strong>Результат работы:</strong>
<img alt="Alt text" src="img/lab1_task2.png" /></p>
<hr />
<h3 id="3-http-">Задание 3. HTTP-сервер (отдача страницы)</h3>
<p><strong>Постановка задачи:</strong> Сервер должен отдавать HTML-страницу при подключении клиента (браузера).</p>
<p><strong>Реализация:</strong>
Сервер читает файл <code>index.html</code> и формирует HTTP-ответ с заголовками и содержимым файла.</p>
<p><em>Код сервера:</em></p>
<pre><code class="language-python">import socket

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.bind(('127.0.0.1', 8080))
sock.listen(1)

while True:
    conn, addr = sock.accept()
    request = conn.recv(1024)
    with open('index.html', 'r', encoding='utf-8') as f:
        content = f.read()

    response = &quot;HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n&quot; + content
    conn.sendall(response.encode('utf-8'))
    conn.close()
</code></pre>
<p><strong>Результат работы:</strong>
<img alt="Alt text" src="img/lab1_task3.png" /></p>
<hr />
<h3 id="4">Задание 4. Многопользовательский чат</h3>
<p><strong>Постановка задачи:</strong> Реализовать чат с поддержкой множества пользователей (использование потоков).</p>
<p><strong>Реализация:</strong>
Использована библиотека <code>threading</code>. На сервере для каждого клиента создается отдельный поток <code>handle</code>, который слушает сообщения и рассылает их всем остальным (<code>broadcast</code>). На клиенте создан отдельный поток для приема сообщений, чтобы ввод данных (<code>input</code>) не блокировал чтение чата.</p>
<p><em>Код сервера:</em></p>
<pre><code class="language-python">import socket
import threading

clients = []

def broadcast(message, _socket):
    for client in clients:
        if client != _socket:
            try:
                client.send(message)
            except:
                clients.remove(client)

def handle(conn):
    while True:
        try:
            message = conn.recv(1024)
            broadcast(message, conn)
        except:
            clients.remove(conn)
            conn.close()
            break

server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server.bind(('127.0.0.1', 5555))
server.listen()

while True:
    conn, addr = server.accept()
    clients.append(conn)
    threading.Thread(target=handle, args=(conn,)).start()
</code></pre>
<p><em>Код клиента:</em></p>
<pre><code class="language-python">import socket
import threading

def receive(sock):
    while True:
        try:
            data = sock.recv(1024)
            print(data.decode('utf-8'))
        except:
            break

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.connect(('127.0.0.1', 5555))

threading.Thread(target=receive, args=(sock,)).start()

name = input(&quot;Name: &quot;)
while True:
    msg = input()
    sock.send(f&quot;{name}: {msg}&quot;.encode('utf-8'))
</code></pre>
<p><strong>Результат работы:</strong>
<img alt="Alt text" src="img/lab1_task4.png" /></p>
<hr />
<h3 id="5-get-post">Задание 5. Веб-сервер с обработкой GET и POST</h3>
<p><strong>Постановка задачи:</strong> Сервер должен принимать данные об оценках через форму (POST) и отображать их в таблице (GET).</p>
<p><strong>Реализация:</strong>
Сервер анализирует HTTP-запрос. Если метод POST, тело запроса парсится, параметры декодируются (<code>unquote_plus</code>) и добавляются в список. HTML-страница генерируется динамически с использованием CSS для стилизации.</p>
<p><em>Код сервера:</em></p>
<pre><code class="language-python">import socket
from urllib.parse import unquote_plus

grades = []

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.bind(('127.0.0.1', 8080))
sock.listen(5)

while True:
    try:
        conn, addr = sock.accept()
        req = conn.recv(8192).decode('utf-8')
        if not req: 
            conn.close()
            continue

        if 'POST' in req.split('\n')[0]:
            body = req.split('\r\n\r\n')[1]
            params = {}
            for p in body.split('&amp;'):
                if '=' in p:
                    key, val = p.split('=')
                    params[key] = unquote_plus(val)

            if 'subj' in params and 'grade' in params:
                grades.append(params)

        if not grades:
            html_rows = &quot;&lt;tr&gt;&lt;td colspan='2' style='text-align:center'&gt;Пока нет записей&lt;/td&gt;&lt;/tr&gt;&quot;
        else:
            html_rows = &quot;&quot;.join([f&quot;&lt;tr&gt;&lt;td&gt;{g['subj']}&lt;/td&gt;&lt;td&gt;{g['grade']}&lt;/td&gt;&lt;/tr&gt;&quot; for g in grades])

        page = f&quot;&quot;&quot;
        &lt;!DOCTYPE html&gt;
        &lt;html lang=&quot;ru&quot;&gt;
        &lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;Журнал&lt;/title&gt;
        &lt;style&gt;
            body {{ font-family: sans-serif; background: #f4f7f6; display: flex; justify-content: center; }}
            .card {{ background: white; padding: 30px; border-radius: 12px; width: 400px; }}
            table {{ width: 100%; border-collapse: collapse; margin-bottom: 20px; }}
            th, td {{ padding: 10px; border-bottom: 1px solid #eee; }}
            input {{ width: 100%; padding: 8px; margin: 5px 0; }}
        &lt;/style&gt;
        &lt;/head&gt;
        &lt;body&gt;
            &lt;div class=&quot;card&quot;&gt;
                &lt;h2&gt;Учет успеваемости&lt;/h2&gt;
                &lt;table&gt;&lt;tr&gt;&lt;th&gt;Дисциплина&lt;/th&gt;&lt;th&gt;Оценка&lt;/th&gt;&lt;/tr&gt;{html_rows}&lt;/table&gt;
                &lt;form method=&quot;POST&quot;&gt;
                    &lt;input type=&quot;text&quot; name=&quot;subj&quot; placeholder=&quot;Предмет&quot; required&gt;
                    &lt;input type=&quot;text&quot; name=&quot;grade&quot; placeholder=&quot;Оценка&quot; required&gt;
                    &lt;input type=&quot;submit&quot; value=&quot;Добавить&quot;&gt;
                &lt;/form&gt;
            &lt;/div&gt;
        &lt;/body&gt;&lt;/html&gt;
        &quot;&quot;&quot;

        resp = &quot;HTTP/1.1 200 OK\r\nContent-Type: text/html; charset=utf-8\r\n\r\n&quot; + page
        conn.sendall(resp.encode('utf-8'))
        conn.close()
    except:
        conn.close()
</code></pre>
<p><strong>Результат работы:</strong>
<img alt="Alt text" src="img/lab1_task5.png" /></p>
<hr />
<h3 id="_2">Вывод</h3>
<p>В ходе лабораторной работы были изучены основы сетевого взаимодействия на языке Python с использованием библиотеки <code>socket</code>. Реализованы приложения на протоколах TCP и UDP. Для реализации многопользовательского чата была применена многопоточность (<code>threading</code>). Также был написан HTTP-сервер, корректно обрабатывающий данные форм (POST-запросы) и декодирующий кириллицу.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>

<!--
MkDocs version : 1.6.1
Build Date UTC : 2026-01-12 17:45:56.322529+00:00
-->
